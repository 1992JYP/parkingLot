<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>simpleMap</title>
    <script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=l7xxb83087e53e4a493189e919b5cfd6f34d"></script>
    <!-- TMAP API에서 발급받은 Key를 사용해 서비스 이용 -->
    <!-- <script src="/index.js"></script> -->
</head>

<script type="text/javascript">
    let map; // TMAP API를 통해 생성될 지도
    let latitude; // 내 현재 위도
    let longitude; // 내 현재 경도

    // 페이지가 로딩이 된 후 호출하는 함수입니다.
    function initTmap() {
        map = new Tmapv2.Map("map_div", { // id가 map_div인 div에 생성한 map을 출력?           
            center: new Tmapv2.LatLng(37.566481622437934, 126.98502302169841), // 지도 초기 좌표 (중앙에 표시될 지도)             
            width: "100%", // map의 width 설정             
            height: "400px", // map의 height 설정             
            httpsMode: true //map의 https모드 설정         
        });
    }

    function Move() { // 내 현재 위치로 이동해주는 버튼의 함수 구현
        const statues = document.querySelector('#status');
        const mapLink = document.querySelector('#map-link');

        function success(position) { latitude = position.coords.latitude; longitude = position.coords.longitude; }

        function error() { status.textContent = 'Unable to retrieve your location'; }

        if (!navigator.geolocation) { status.textContent = 'Geolocation is not supported by your browser'; }

        else { status.textContent = 'Locating…'; navigator.geolocation.getCurrentPosition(success, error); }

        var lonlat = new Tmapv2.LatLng(latitude, longitude);
        map.setCenter(lonlat); // 지도의 중심 좌표를 설정합니다.
    }
</script>

<!-- body 안의 코드를 실행하기 전에 initTmap() 함수 실행 -->

<body onload="initTmap()">
    <!-- 지도를 띄울 map_div id를 가진 div-->
    <div id="map_div"></div>

    <!-- 내 현재 위치로 이동시켜줄 버튼 -->
    <div>
        <button onclick="Move()">현재 내 위치</button>
    </div>
</body>

</html>